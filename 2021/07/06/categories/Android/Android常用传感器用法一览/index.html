<!DOCTYPE HTML>
<html lang="zh-CN">

<head>
    <!--Setting-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <meta http-equiv="Cache-Control" content="no-transform">
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta name="apple-mobile-web-app-capable" content="清风明月博客">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no,email=no,adress=no">
    <meta name="browsermode" content="application">
    <meta name="screen-orientation" content="portrait">
    <meta name="theme-version" content="1.3.0">
    <meta name="root" content="/Visen123.github.io/">
    <link rel="dns-prefetch" href="https://Visen123.github.io">
    <!--SEO-->

<meta name="keywords" content="Android" />


<meta name="description" content="1、传感器入门自从苹果公司在2007年发布第一代iPhone以来，以前看似和手机挨不着边的传感器也逐渐成为手机硬件的重要组成部分。如果读者使用过iPhone、HTC Dream、HTC Magi..." />


<meta name="robots" content="all" />
<meta name="google" content="all" />
<meta name="googlebot" content="all" />
<meta name="verify" content="all" />
    <!--Title-->

<title>
    
    Android常用传感器用法一览 |
    
    清风明月博客
</title>

<link rel="alternate" href="/atom.xml" title="清风明月博客" type="application/atom+xml">


<link rel="icon" href="/favicon.ico">

    


<link rel="stylesheet" href="/Visen123.github.io/css/bootstrap.min.css?rev=3.3.7.css">
<link rel="stylesheet" href="/Visen123.github.io/css/font-awesome.min.css?rev=4.7.0.css">
<link rel="stylesheet" href="/Visen123.github.io/css/style.css?rev=@@hash.css">

    
<div class="hide">
    <script type="text/javascript">
    var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");
    document.write(unescape("%3Cspan class='cnzz_stat_icon_1263868967 hide' %3E%3Cscript%20src%3D%22https%3A%2F%2Fs95.cnzz.com%2Fz_stat.php%3Fweb_id%3D1272564536%22%3E%3C%2Fscript%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s19.cnzz.com/z_stat.php%3Fid%3D1263868967%26show%3Dpic1' type='text/javascript'%3E%3C/script%3E"));
    </script>
</div>




    

<meta name="generator" content="Hexo 5.4.0"></head>
<!--[if lte IE 8]>
<style>
    html{ font-size: 1em }
</style>
<![endif]-->
<!--[if lte IE 9]>
<div style="ie">你使用的浏览器版本过低，为了你更好的阅读体验，请更新浏览器的版本或者使用其他现代浏览器，比如Chrome、Firefox、Safari等。</div>
<![endif]-->
<body>
    <header class="main-header"  style="background-image:url(
    /Visen123.github.io/./img/beiixin.jpg)"
     >
    <div class="main-header-box">
        <a class="header-avatar" href="/" title='清风明月'>
            <img src="/Visen123.github.io/img/avatar.jpg" alt="logo头像" class="img-responsive center-block">
        </a>
        <div class="branding">
            <!--<h2 class="text-hide">Snippet主题,从未如此简单有趣</h2>-->
            
            <img src="/Visen123.github.io/img/branding.png" alt="Snippet 博客主题" class="img-responsive center-block">
            
        </div>
    </div>
</header>
    <nav class="main-navigation">
    <div class="container">
        <div class="row">
            <div class="col-sm-12">
                <div class="navbar-header"><span class="nav-toggle-button collapsed pull-right" data-toggle="collapse" data-target="#main-menu" id="mnav">
                        <span class="sr-only"></span>
                        <i class="fa fa-bars"></i>
                    </span>
                    <a class="navbar-brand" href="https://Visen123.github.io">
                        清风明月博客</a>
                </div>
                <div class="collapse navbar-collapse" id="main-menu">
                    <ul class="menu">
                        
                        <li role="presentation" class="text-center">
                            <a href="/"><i class="fa "></i>
                                首页</a>
                        </li>
                        
                        <li role="presentation" class="text-center">
                            <a href="/categories/Android/"><i class="fa "></i>
                                Android</a>
                        </li>
                        
                        <li role="presentation" class="text-center">
                            <a href="/categories/Python/"><i class="fa "></i>
                                Python</a>
                        </li>
                        
                        <li role="presentation" class="text-center">
                            <a href="/categories/小程序/"><i class="fa "></i>
                                小程序</a>
                        </li>
                        
                        <li role="presentation" class="text-center">
                            <a href="/categories/HarmonyOS/"><i class="fa "></i>
                                HarmonyOS</a>
                        </li>
                        
                        <li role="presentation" class="text-center">
                            <a href="/categories/前端/"><i class="fa "></i>
                                前端</a>
                        </li>
                        
                        <li role="presentation" class="text-center">
                            <a href="/categories/后端/"><i class="fa "></i>
                                后端</a>
                        </li>
                        
                        <li role="presentation" class="text-center">
                            <a href="/categories/工具/"><i class="fa "></i>
                                工具</a>
                        </li>
                        
                        <li role="presentation" class="text-center">
                            <a href="/archives/"><i class="fa "></i>
                                时间轴</a>
                        </li>
                        
                    </ul>
                </div>
            </div>
        </div>
    </div>
</nav>
    <section class="content-wrap">
        <div class="container">
            <div class="row">
                <main class="col-md-8 main-content m-post">
                    <p id="process"></p>
<article class="post">
    <div class="post-head">
        <h1 id="Android常用传感器用法一览">
            
            Android常用传感器用法一览
            
        </h1>
        <div class="post-meta">
    
    <span class="categories-meta fa-wrap">
        <i class="fa fa-folder-open-o"></i>
        <a class="category-link" href="/Visen123.github.io/categories/Android/">Android</a>
    </span>
    
    
    <span class="fa-wrap">
        <i class="fa fa-tags"></i>
        <span class="tags-meta">
            
        </span>
    </span>
    
    
    
    <span class="fa-wrap">
        <i class="fa fa-clock-o"></i>
        <span class="date-meta">
            2021/07/06</span>
    </span>
    
    
</div>
        
        
    </div>
    
    <div class="post-body post-content">
        <h2 id="1、传感器入门"><a href="#1、传感器入门" class="headerlink" title="1、传感器入门"></a>1、传感器入门</h2><p>自从苹果公司在2007年发布第一代iPhone以来，以前看似和手机挨不着边的传感器也逐渐成为手机硬件的重要组成部分。如果读者使用过iPhone、HTC Dream、HTC Magic、HTC Hero以及其他的Android手机，会发现通过将手机横向或纵向放置，屏幕会随着手机位置的不同而改变方向。这种功能就需要通过重力传感器来实现，除了重力传感器，还有很多其他类型的传感器被应用到手机中，例如磁阻传感器就是最重要的一种传感器。虽然手机可以通过GPS来判断方向，但在GPS信号不好或根本没有GPS信号的情况下，GPS就形同虚设。这时通过磁阻传感器就可以很容易判断方向（东、南、西、北）。有了磁阻传感器，也使罗盘（俗称指向针）的电子化成为可能。<br>在Android应用程序中使用传感器要依赖于android.hardware.SensorEventListener接口。通过该接口可以监听传感器的各种事件。SensorEventListener接口的代码如下：<br>package android.hardware;<br>public interface SensorEventListener<br>{<br>    public void<br>onSensorChanged(SensorEvent event);<br>    public void<br>onAccuracyChanged(Sensor sensor, int accuracy);<br>}<br>复制代码</p>
<p>在SensorEventListener接口中定义了两个方法：onSensorChanged和onAccuracyChanged。当传感器的值发生变化时，例如磁阻传感器的方向改变时会调用onSensorChanged方法。当传感器的精度变化时会调用onAccuracyChanged方法。<br>onSensorChanged方法只有一个SensorEvent类型的参数event，其中SensorEvent类有一个values变量非常重要，该变量的类型是float[]。但该变量最多只有3个元素，而且根据传感器的不同，values变量中元素所代表的含义也不同。</p>
<p>在解释values变量中元素的含义之前，先来介绍一下Android的坐标系统是如何定义X、Y、Z轴的。</p>
<p>X轴的方向是沿着屏幕的水平方向从左向右。如果手机不是正方形的话，较短的边需要水平放置，较长的边需要垂直放置。<br>Y轴的方向是从屏幕的左下角开始沿着屏幕的垂直方向指向屏幕的顶端。<br>将手机平放在桌子上，Z轴的方向是从手机里指向天空。</p>
<p>下面是values变量的元素在主要的传感器中所代表的含义。</p>
<h3 id="1-1方向传感器"><a href="#1-1方向传感器" class="headerlink" title="1.1方向传感器"></a>1.1方向传感器</h3><p>在方向传感器中values变量的3个值都表示度数，它们的含义如下：</p>
<p>values[0]：该值表示方位，也就是手机绕着Z轴旋转的角度。0表示北（North）；90表示东（East）；180表示南（South）；270表示西（West）。如果values[0]的值正好是这4个值，并且手机是水平放置，表示手机的正前方就是这4个方向。可以利用这个特性来实现电子罗盘，实例76将详细介绍电子罗盘的实现过程。</p>
<p>values[1]：该值表示倾斜度，或手机翘起的程度。当手机绕着X轴倾斜时该值发生变化。values[1]的取值范围是-180≤values[1]<br>≤180。假设将手机屏幕朝上水平放在桌子上，这时如果桌子是完全水平的，values[1]的值应该是0（由于很少有桌子是绝对水平的，因此，该值很可能不为0，但一般都是-5和5之间的某个值）。这时从手机顶部开始抬起，直到将手机沿X轴旋转180度（屏幕向下水平放在桌面上）。在这个旋转过程中，values[1]会在0到-180之间变化，也就是说，从手机顶部抬起时，values[1]的值会逐渐变小，直到等于-180。如果从手机底部开始抬起，直到将手机沿X轴旋转180度，这时values[1]会在0到180之间变化。也就是values[1]的值会逐渐增大，直到等于180。可以利用values[1]和下面要介绍的values[2]来测量桌子等物体的倾斜度。</p>
<p>values[2]：表示手机沿着Y轴的滚动角度。取值范围是-90≤values[2]≤90。假设将手机屏幕朝上水平放在桌面上，这时如果桌面是平的，values[2]的值应为0。将手机左侧逐渐抬起时，values[2]的值逐渐变小，直到手机垂直于桌面放置，这时values[2]的值是-90。将手机右侧逐渐抬起时，values[2]的值逐渐增大，直到手机垂直于桌面放置，这时values[2]的值是90。在垂直位置时继续向右或向左滚动，values[2]的值会继续在-90至90之间变化。</p>
<h3 id="1-2加速传感器"><a href="#1-2加速传感器" class="headerlink" title="1.2加速传感器"></a>1.2加速传感器</h3><pre><code>该传感器的values变量的3个元素值分别表示X、Y、Z轴的加速值。例如，水平放在桌面上的手机从左侧向右侧移动，values[0]为负值；从右向左移动，values[0]为正值。读者可以通过本节的例子来体会加速传感器中的值的变化。要想使用相应的传感器，仅实现SensorEventListener接口是不够的，还需要使用下面的代码来注册相应的传感器。
</code></pre>
<p>//  获得传感器管理器</p>
<p>SensorManager sm = (SensorManager) getSystemService(SENSOR_SERVICE);</p>
<p>//  注册方向传感器</p>
<p>sm.registerListener(this,<br>sm.getDefaultSensor(Sensor.TYPE_ORIENTATION),</p>
<p>SensorManager.SENSOR_DELAY_FASTEST);</p>
<p>如果想注册其他的传感器，可以改变getDefaultSensor方法的第1个参数值，例如，注册加速传感器可以使用Sensor.TYPE_ACCELEROMETER。在Sensor类中还定义了很多传感器常量，但要根据手机中实际的硬件配置来注册传感器。如果手机中没有相应的传感器硬件，就算注册了相应的传感器也不起任何作用。getDefaultSensor方法的第2个参数表示获得传感器数据的速度。SensorManager.SENSOR_DELAY_ FASTEST表示尽可能快地获得传感器数据。除了该值以外，还可以设置3个获得传感器数据的速度值，这些值如下：</p>
<p>SensorManager.SENSOR_DELAY_NORMAL：默认的获得传感器数据的速度。<br>SensorManager.SENSOR_DELAY_GAME：如果利用传感器开发游戏，建议使用该值。<br>SensorManager.SENSOR_DELAY_UI：如果使用传感器更新UI中的数据，建议使用该值。</p>
<h3 id="1-3重力感应器"><a href="#1-3重力感应器" class="headerlink" title="1.3重力感应器"></a>1.3重力感应器</h3><p>加速度传感器的类型常量是Sensor.TYPE_GRAVITY。重力传感器与加速度传感器使用同一套坐标系。values数组中三个元素分别表示了X、Y、Z轴的重力大小。Android SDK定义了一些常量，用于表示星系中行星、卫星和太阳表面的重力。下面就来温习一下天文知识，将来如果在地球以外用Android手机，也许会用得上。<br>public static final float GRAVITY_SUN= 275.0f;<br>public static final float GRAVITY_MERCURY= 3.70f;<br>public static final float GRAVITY_VENUS= 8.87f;<br>public static final float GRAVITY_EARTH= 9.80665f;<br>public static final float GRAVITY_MOON= 1.6f;<br>public static final float GRAVITY_MARS= 3.71f;<br>public static final float GRAVITY_JUPITER= 23.12f;<br>public static final float GRAVITY_SATURN= 8.96f;<br>public static final float GRAVITY_URANUS= 8.69f;<br>public static final float GRAVITY_NEPTUNE= 11.0f;<br>public static final float GRAVITY_PLUTO= 0.6f;<br>public static final float GRAVITY_DEATH_STAR_I= 0.000000353036145f;<br>public static final float GRAVITY_THE_ISLAND= 4.815162342f;</p>
<h3 id="1-4-光线传感器"><a href="#1-4-光线传感器" class="headerlink" title="1.4 光线传感器"></a>1.4 光线传感器</h3><p>光线传感器的类型常量是Sensor.TYPE_LIGHT。values数组只有第一个元素（values[0]）有意义。表示光线的强度。最大的值是120000.0f。Android SDK将光线强度分为不同的等级，每一个等级的最大值由一个常量表示，这些常量都定义在SensorManager类中，代码如下：<br>public static final float LIGHT_SUNLIGHT_MAX =120000.0f;<br>public static final float LIGHT_SUNLIGHT=110000.0f;<br>public static final float LIGHT_SHADE=20000.0f;<br>public static final float LIGHT_OVERCAST= 10000.0f;<br>public static final float LIGHT_SUNRISE= 400.0f;<br>public static final float LIGHT_CLOUDY= 100.0f;<br>public static final float LIGHT_FULLMOON= 0.25f;<br>public static final float LIGHT_NO_MOON= 0.001f;</p>
<p>上面的八个常量只是临界值。读者在实际使用光线传感器时要根据实际情况确定一个范围。例如，当太阳逐渐升起时，values[0]的值很可能会超过LIGHT_SUNRISE，当values[0]的值逐渐增大时，就会逐渐越过LIGHT_OVERCAST，而达到LIGHT_SHADE，当然，如果天特别好的话，也可能会达到LIGHT_SUNLIGHT，甚至更高。</p>
<h3 id="1-5陀螺仪传感器"><a href="#1-5陀螺仪传感器" class="headerlink" title="1.5陀螺仪传感器"></a>1.5陀螺仪传感器</h3><p>   陀螺仪传感器的类型常量是Sensor.TYPE_GYROSCOPE。values数组的三个元素表示的含义如下：values[0]：延X轴旋转的角速度。<br>values[1]：延Y轴旋转的角速度。<br>values[2]：延Z轴旋转的角速度。<br>当手机逆时针旋转时，角速度为正值，顺时针旋转时，角速度为负值。陀螺仪传感器经常被用来计算手机已转动的角度，代码如下：<br>private static final float NS2S = 1.0f / 1000000000.0f;<br>private float timestamp;<br>public void onSensorChanged(SensorEvent event)<br>{<br>    if (timestamp != 0)<br>    {<br>    //  event.timesamp表示当前的时间，单位是纳秒（1百万分之一毫秒）<br>              final float dT = (event.timestamp - timestamp) * NS2S;<br>              angle[0] += event.values[0] * dT;<br>              angle[1] += event.values[1] * dT;<br>              angle[2] += event.values[2] * dT;<br>     }<br>     timestamp = event.timestamp;<br>}</p>
<p>上面代码中通过陀螺仪传感器相邻两次获得数据的时间差（dT）来分别计算在这段时间内手机延X、 Y、Z轴旋转的角度，并将值分别累加到angle数组的不同元素上。</p>
<h3 id="1-6其他传感器"><a href="#1-6其他传感器" class="headerlink" title="1.6其他传感器"></a>1.6其他传感器</h3><p>其他传感器在前面几节介绍了加速度传感器、重力传感器、光线传感器、陀螺仪传感器以及方向传感器。除了这些传感器外，Android SDK还支持如下的几种传感器。关于这些传感器的使用方法以及与这些传感器相关的常量、方法，读者可以参阅官方文档。</p>
<p>近程传感器（Sensor.TYPE_PROXIMITY）<br>线性加速度传感器（Sensor.TYPE_LINEAR_ACCELERATION）<br>旋转向量传感器（Sensor.TYPE_ROTATION_VECTOR）<br>磁场传感器（Sensor.TYPE_MAGNETIC_FIELD）<br>压力传感器（Sensor.TYPE_PRESSURE）<br>温度传感器（Sensor.TYPE_TEMPERATURE）</p>
<p>虽然AndroidSDK定义了十多种传感器，但并不是每一部手机都完全支持这些传感器。例如，Google Nexus S支持其中的9种传感器（不支持压力和温度传感器），而HTC G7只支持其中的5种传感器。如果使用了手机不支持的传感器，一般不会抛出异常，但也无法获得传感器传回的数据。读者在使用传感器时最好先判断当前的手机是否支持所使用的传感器。</p>

    </div>
    <div align="center">
     <p style="text-align:center; color:orange; font-size:26px">安卓学习教程公众号</p>
       <img src="/Visen123.github.io/./img/ercode.jpg" width="258" height="258">
     </div>
    
    <div class="reward" ontouchstart>
    <div class="reward-wrap">赏
        <div class="reward-box">
            
            
            <span class="reward-type">
                <img class="wechat" src="/Visen123.github.io/./img/reward-wepay.jpg"><b>微信打赏</b>
            </span>
            
        </div>
    </div>
    <p class="reward-tip">
        祝你事业顺心，富贵吉祥，赞赏鼓励
    </p>
</div>
    
    <div class="post-footer">
        <div>
            
            转载声明：
            商业转载请联系作者获得授权,非商业转载请注明出处 © <a href="" target="_blank">清风明月</a>
            
            
        </div>
        <div>
            
        </div>
    </div>
</article>
<div class="article-nav prev-next-wrap clearfix">
    
    <a href="/Visen123.github.io/2021/08/01/categories/HarmonyOS/HarmonyOS%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85/" class="pre-post btn btn-default" title='HarmonyOS开发工具下载安装'>
        <i class="fa fa-angle-left fa-fw"></i><span class="hidden-lg">上一篇</span>
        <span class="hidden-xs">
            HarmonyOS开发工具下载安装</span>
    </a>
    
    
    <a href="/Visen123.github.io/2021/06/29/categories/%E5%B7%A5%E5%85%B7/Python%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7%E6%B1%87%E6%80%BB/" class="next-post btn btn-default" title='Python常用工具包汇总'>
        <span class="hidden-lg">下一篇</span>
        <span class="hidden-xs">
            Python常用工具包汇总</span><i class="fa fa-angle-right fa-fw"></i>
    </a>
    
</div>

<div id="comments">
    
    
<div class="utteranc">
  
  <script
    src='https://utteranc.es/client.js'
    repo='yansil/snippet-comment'
    issue-term='pathname'
    issue-number=''
    theme='github-light'
    label=''
    crossorigin='anonymous'
    async
  ></script>
</div>



</div>

                </main>
                
                    <aside id="article-toc" role="navigation" class="col-md-4">
    <div class="widget">
        <h3 class="title">
            文章目录
        </h3>
        
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E4%BC%A0%E6%84%9F%E5%99%A8%E5%85%A5%E9%97%A8"><span class="toc-text">1、传感器入门</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1%E6%96%B9%E5%90%91%E4%BC%A0%E6%84%9F%E5%99%A8"><span class="toc-text">1.1方向传感器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2%E5%8A%A0%E9%80%9F%E4%BC%A0%E6%84%9F%E5%99%A8"><span class="toc-text">1.2加速传感器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3%E9%87%8D%E5%8A%9B%E6%84%9F%E5%BA%94%E5%99%A8"><span class="toc-text">1.3重力感应器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-4-%E5%85%89%E7%BA%BF%E4%BC%A0%E6%84%9F%E5%99%A8"><span class="toc-text">1.4 光线传感器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-5%E9%99%80%E8%9E%BA%E4%BB%AA%E4%BC%A0%E6%84%9F%E5%99%A8"><span class="toc-text">1.5陀螺仪传感器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-6%E5%85%B6%E4%BB%96%E4%BC%A0%E6%84%9F%E5%99%A8"><span class="toc-text">1.6其他传感器</span></a></li></ol></li></ol>
        
    </div>
</aside>
                
            </div>
        </div>
    </section>
    <footer class="main-footer">
    <div class="container">
        <div class="row">
        </div>
    </div>
</footer>
<a id="back-to-top" class="icon-btn hide">
    <i class="fa fa-chevron-up"></i>
</a>
    <div class="copyright">
    <div class="container">
        <div class="row">
            <div class="col-sm-12">
                <div class="busuanzi">
    
</div>
            </div>
            <div class="col-sm-12">
                <span>Copyright &copy;
                    2021
                    
                </span> |
                <span>
                    Powered by <a href="//yansil.github.io" class="copyright-links" target="_blank" rel="nofollow">Hexo</a>
                </span>
            </div>
        </div>
    </div>
</div>




<script src="/Visen123.github.io/js/app.js?rev=@@hash.js"></script>

</body>
</html>